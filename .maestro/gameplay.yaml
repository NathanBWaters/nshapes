appId: com.nshapes.app
---
# NShapes Gameplay Test Flow
# This test will play through a basic game session

# Wait for the app to fully load
- launchApp:
    clearState: true

# Wait for the main menu to appear
- extendedWaitUntil:
    visible: "NSHAPES"
    timeout: 10000

# Step 1: Choose Adventure mode
- tapOn:
    id: "menu-adventure"

# Step 2: Wait for character selection screen
- extendedWaitUntil:
    visible: "Choose Your Character"
    timeout: 5000

# Step 3: Wait for a character to be auto-selected (button text changes)
- extendedWaitUntil:
    visible: "Start Adventure"
    timeout: 3000

# Longer delay to ensure UI is fully rendered and interactive
- swipe:
    start: "50%, 50%"
    end: "50%, 50%"
    duration: 2000

# Dismiss any debugger overlay by tapping X if present
- runFlow:
    when:
      visible: "Open debugger"
    commands:
      - tapOn:
          point: "95%, 95%"

# Step 4: Tap Start Adventure button (very bottom of screen)
- tapOn:
    point: "50%, 95%"

# Step 5: Wait for and handle tutorial prompt
- extendedWaitUntil:
    visible: "New to NShapes"
    timeout: 5000

# Tap on Skip link to start the game
- tapOn: "Skip - Start Adventure"

# Step 6: Wait for game board to appear with the round indicator
- extendedWaitUntil:
    visible: "R1"
    timeout: 8000

# Step 7: Verify the game is running (round indicator visible means game is active)
- assertVisible: "R1"

# Step 8: Tap three cards to attempt a match
# Cards are arranged in a grid, tapping at different points in the card area
# First card - left column
- tapOn:
    point: "20%,50%"

# Small delay between taps
- swipe:
    start: "50%, 50%"
    end: "50%, 50%"
    duration: 200

# Second card - middle column
- tapOn:
    point: "50%,50%"

# Small delay
- swipe:
    start: "50%, 50%"
    end: "50%, 50%"
    duration: 200

# Third card - right column
- tapOn:
    point: "80%,50%"

# Wait for any animation to complete
- swipe:
    start: "50%, 50%"
    end: "50%, 50%"
    duration: 1500

# Verify the game is still running (round indicator visible means game is active)
- assertVisible: "R1"
